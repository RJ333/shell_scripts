copied from https://stackoverflow.com/questions/49050245/how-to-use-awk-to-add-specific-values-to-a-column-based-on-numeric-ranges

Explanation: While reading the first file (NR==FNR section), create arrays indexed with line number to start and end of the ranges. 
We need to correlate the ranges with the key, so create a map indexed with key and start for each range; here also the opportunity to 
create the indexed tag using the line number counter and the last field as the label, format the number to zero padded three digits.

For processing the second file (second statement now), we iterate through all the starts find the matching end and 
verify the key,range start is a valid combination, print the line with the formatted suffix added.

This can be made more efficient by indexing the start values with the key, but will complicate the code. 
If your "bed" file is not huge, shouldn't be a problem. Also intentionally prints all the matching entries, not the 
first one to validate that the ranges do not overlap. Otherwise, do the validation offline and improve speed by breaking after the 
first match/print. Also if the start values are sorted, loop can be exited early when the start range is missed.

key map contains the $1 and range start as the (composite) key and the value you want to attach to the match "phnE_00x" as the value. 
$4 sprint() is one value, string concatenation without any delimiter. Providing part of the key wont work as key[$1], you should 
have key[$1,s] where s is the corresponding start value assigned in the first statement.

composite/compound key concept: 
en.wikipedia.org/wiki/Compound_key 
sqa.org.uk/e-learning/MDBS01CD/page_19.htm